<?php session_start(); include '../db_connect.php'; if($_SERVER['REQUEST_METHOD']==='POST'){ $email=$_POST['email']; $password=$_POST['password']; $stmt=$conn->prepare('SELECT id,name,password,role FROM users WHERE email=? AND role="admin"'); $stmt->bind_param('s',$email); $stmt->execute(); $res=$stmt->get_result(); if($res->num_rows){ $u=$res->fetch_assoc(); if(password_verify($password,$u['password'])){ $_SESSION['admin_id']=$u['id']; $_SESSION['admin_name']=$u['name']; header('Location: admin_dashboard.php'); exit(); } else $error='Invalid password'; } else $error='No admin found'; } include '../includes/header.php'; ?>
<div class="container py-5"><h2>Admin Login</h2><?php if(!empty($error)) echo '<div class="alert alert-danger">'.htmlspecialchars($error).'</div>'; ?><form method="post" class="col-md-6"><input class="form-control mb-3" type="email" name="email" placeholder="Admin email" required><input class="form-control mb-3" type="password" name="password" placeholder="Password" required><button class="btn btn-primary">Login</button></form></div><?php include '../includes/footer.php'; ?>